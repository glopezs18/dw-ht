var express=require("express"),citizen=express.Router(),citizens=[];citizen.use(express.json()),citizen.post("/",(function(req,res){const nombres=req.body.nombres,apellidos=req.body.apellidos,dpi=req.body.dpi,fechaNacimiento=req.body.fechaNacimiento,estadoCivil=req.body.estadoCivil,usuario={nombres:nombres,apellidos:apellidos,dpi:dpi,fechaNacimiento:fechaNacimiento,estadoCivil:estadoCivil};if(!(dpi&&""!=dpi&&nombres&&""!=nombres&&apellidos&&""!=apellidos&&fechaNacimiento&&""!=fechaNacimiento&&estadoCivil&&""!=estadoCivil))return res.status(404).json({error:"Debe completar todos los datos requeridos."});citizens.push(usuario),res.json({success:"Se creo el registro del ciudadano."})})),citizen.put("/:dpi",(function(req,res){const dpi=req.params.dpi,nombres=req.body.nombres,apellidos=req.body.apellidos,fechaNacimiento=req.body.fechaNacimiento,estadoCivil=req.body.estadoCivil;if(""==nombres||""==apellidos||""==fechaNacimiento||""==estadoCivil)return res.status(404).json({error:"Debe completar todos los datos requeridos para poder actualizarlos."});const objIndex=citizens.findIndex(obj=>obj.dpi==dpi);citizens[objIndex].nombres=nombres&&""!=nombres?nombres:citizens[objIndex].nombres,citizens[objIndex].apellidos=apellidos&&""!=apellidos?apellidos:citizens[objIndex].apellidos,citizens[objIndex].fechaNacimiento=fechaNacimiento&&""!=fechaNacimiento?fechaNacimiento:citizens[objIndex].fechaNacimiento,citizens[objIndex].estadoCivil=estadoCivil&&""!=estadoCivil?estadoCivil:citizens[objIndex].estadoCivil,res.json({success:"Se actualizaron los datos del ciudadano "+dpi})})),citizen.delete("/:dpi",(function(req,res){const dpi=req.params.dpi,citizen=citizens.find(c=>c.id===dpi);if(!citizen)return res.status(402).send("No se encontró el registro solicitado");const objIndex=citizens.findIndex(obj=>obj.dpi==dpi);citizens.splice(objIndex,1),res.json({success:"Se eliminó al ciudadano con dpi No. "+dpi})})),citizen.get("/:dpi",(function(req,res){const dpi=req.params.dpi;let validate_dpi;const found_citizen=citizens.some(person=>person.dpi==dpi)?citizens.find(person=>person.dpi===dpi):{message:"No existe el registro solicitado."};res.json(found_citizen)})),citizen.get("/",(function(req,res){if(0==citizens.length)return res.status(404).json({message:"No hay ciudadanos registrados todavía."});res.json(citizens)})),module.exports=citizen;
//# sourceMappingURL=ciudadanos.min.js.map